<!-- ESTE ES EL LUGAR DONDE ESATRAN LÑO FILTROS Y EL BUSCAR -->
<nav class="navbar navbar-expand-lg bg-body-tertiary">
  <div class="container-fluid">
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item">
          <a class="nav-link active" aria-current="page">Categorias</a>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">Filtro</a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="#">Mas populares</a></li>
            <li><a class="dropdown-item" href="#">Mejor calificación</a></li>
          </ul>
        </li>
      </ul>
      <form class="d-flex" role="search">
        <ion-input class="form-control me-2" type="search" placeholder="Search" aria-label="Search" (ionInput)="onSearch($event)"></ion-input>
        <button class="btn btn-outline-success" type="submit">Search</button>
      </form>
    </div>
  </div>
</nav>
<!-- ESTE ES EL LUGAR DONDE ESATRAN LÑO FILTROS Y EL BUSCAR
  FIN -->

<!-- ESTO ES EL LUGAR EN DONDE EAT UBUCADO EL PODIO DONDE ESATRAN LLOS PROVEDORES CON MEJOR CALIFICACION -->
<ion-content class="">
  <div class="bigimage">

     <!-- Encabezado de la página -->
     <section class="text-center container">
      <ion-grid>
        <ion-row class="ion-justify-content-center py-4">
          <ion-col size-md="8" size-sm="12" class="ion-text-center">
            <!-- Imagen antes del título -->
            <img src="../../../../assets/images/logo.png" alt="Imagen descriptiva" class="img-fluid mb-4">
            <h1 class="fw-light">Proveedores Destacados</h1>
            <p class="lead text-secondary">ESTE APARTADO ESTARA PROXIMAMENTE DISPONIBLE</p>
          </ion-col>
        </ion-row>
      </ion-grid>
    </section>
<!-- ESTO ES EL LUGAR EN DONDE EAT UBUCADO EL PODIO DONDE ESATRAN LLOS PROVEDORES CON MEJOR CALIFICACION
 FIN -->

  <!-- Lista de proveedores y modal en dos columnas -->
  <ion-grid>
    <ion-row class="ion-justify-content-start">
      <!-- Lista de proveedores -->
      <ion-col  size="12" size-md="8">
        <div class="row justify-content-center">
          <div class="col-12 col-md-6 col-lg-6 mb-4 card-border" *ngFor="let proveedor of proveedoresFiltrados">
            <div class="row g-0 border rounded shadow-sm card-custom">
              <!-- Imagen del proveedor -->
              <div class="col-auto d-none d-lg-block">
                <img *ngIf="proveedor.foto" [src]="'http://localhost:8000' + proveedor.foto" class="bd-placeholder-img" alt="Foto del proveedor" width="240" height="240">
                <img *ngIf="!proveedor.foto" src="assets/images/descarga.jpeg" class="bd-placeholder-img" alt="Imagen por defecto" width="240" height="240">
              </div>

              <!-- Detalles del proveedor -->
              <div class="col p-4 d-flex flex-column position-static">
                <strong class="d-inline-block mb-2 text-primary-emphasis">{{ proveedor.nombre }} {{ proveedor.apellido }}</strong>
                <div class="mb-1 text-body-secondary">{{ proveedor.correo_electronico }}</div>
                <!-- <div class="mb-1 text-body-secondary">{{ proveedor.direccion }}</div> -->
                <button class="btn btn-primary btn-custom" (click)="verProductosProveedor(proveedor.rut, proveedor.nombre)">Ver Productos</button>

                <div class="d-flex justify-content-between align-items-center">
                  <div class="rating my-2">
                    <!-- Estrellas de calificación -->
                    <input [value]="5" [name]="'rating' + proveedor.rut" [id]="'star5-' + proveedor.rut" type="radio">
                    <label [for]="'star5-' + proveedor.rut"></label>
                    <input [value]="4" [name]="'rating' + proveedor.rut" [id]="'star4-' + proveedor.rut" type="radio">
                    <label [for]="'star4-' + proveedor.rut"></label>
                    <input [value]="3" [name]="'rating' + proveedor.rut" [id]="'star3-' + proveedor.rut" type="radio">
                    <label [for]="'star3-' + proveedor.rut"></label>
                    <input [value]="2" [name]="'rating' + proveedor.rut" [id]="'star2-' + proveedor.rut" type="radio">
                    <label [for]="'star2-' + proveedor.rut"></label>
                    <input [value]="1" [name]="'rating' + proveedor.rut" [id]="'star1-' + proveedor.rut" type="radio">
                    <label [for]="'star1-' + proveedor.rut"></label>
                  </div>
                </div>
              </div>

            </div>
          </div>
        </div>
      </ion-col>

      <!-- Modal de productos -->
      <ion-col size="12" size-md="4" class="d-flex justify-content-end">
        <div *ngIf="mostrarModal" class="p-4 modal-sheet bg-body-secondary rounded-4 shadow" style="z-index: 1050;">
          <h2 class="fw-bold mb-3">Productos más destacados del proveedor</h2>
          <h4 style="color: black;">{{ nombreProveedorSeleccionado }}</h4>
          <ul class="list-unstyled small">
            <li *ngFor="let producto of productos" class="mb-3">
              <h5 class="mb-0">{{ producto.nombre_producto }}</h5>
              <p>{{ producto.precio | currency }}</p>
            </li>
          </ul>
          <button type="button" class="btn btn-lg btn-primary mt-3 w-100" (click)="cerrarModal()">Cerrar</button>
        </div>
      </ion-col>
    </ion-row>
  </ion-grid>
  </div>

</ion-content>

<ion-footer class="ion-text-center ion-padding">
  <p>Plataforma de proveedores &copy; 2024</p>
  <ion-button fill="clear" size="small" (click)="scrollToTop()">Volver arriba</ion-button>
</ion-footer>
